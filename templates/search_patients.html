{% extends 'base.html' %}
{% block title %}Search Patients - Admin Dashboard{% endblock %}
{% block content %}
<div class="page-header">
  <div class="d-flex justify-content-between align-items-center">
    <div>
      <h3><i class="bi bi-people me-2"></i>Search Patients</h3>
      <p class="text-muted mb-0">Search and manage patient records</p>
    </div>
    <div>
      <a class="btn btn-outline-secondary" href="{{ url_for('admin_dashboard') }}">
        <i class="bi bi-arrow-left me-2"></i>Back to Dashboard
      </a>
    </div>
  </div>
</div>

<div class="content-area mb-4">
  <form class="row g-3">
    <div class="col-md-10">
      <label class="form-label">Search Query</label>
      <input name="q" value="{{ q }}" class="form-control" placeholder="Search by name or patient ID">
    </div>
    <div class="col-md-2 d-flex align-items-end">
      <button class="btn btn-primary w-100">
        <i class="bi bi-search me-2"></i>Search
      </button>
    </div>
  </form>
</div>

<div class="content-area">
  <h5 class="mb-3">
    <i class="bi bi-list-ul me-2"></i>Patient Results
  </h5>
  {% if patients %}
    <div class="list-group">
      {% for p in patients %}
        <div class="list-group-item d-flex justify-content-between align-items-start">
          <div class="ms-2 me-auto">
            <div class="fw-bold">{{ p.user.full_name }}</div>
            <small class="text-muted">ID: {{ p.id }} | Username: {{ p.user.username }}</small>
          </div>
          <span class="badge bg-{% if p.user.active %}success{% else %}danger{% endif %}">
            {{ 'Active' if p.user.active else 'Inactive' }}
          </span>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="text-center py-4">
      <i class="bi bi-search text-muted" style="font-size: 3rem;"></i>
      <p class="text-muted mt-2 mb-0">No patients found</p>
    </div>
  {% endif %}
</div>
{% endblock %}
